<div>
    <table mat-table [dataSource]="dataSource">

        <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef> #</th>
            <td mat-cell *matCellDef="let element"> {{ element.id }} </td>
        </ng-container>

        <ng-container matColumnDef="created">
            <th mat-header-cell *matHeaderCellDef> Дата</th>
            <td mat-cell *matCellDef="let element"> {{element.created | date:"dd.MM.yyyy HH:mm" }} </td>
        </ng-container>

        <ng-container matColumnDef="payDocNum">
            <th mat-header-cell *matHeaderCellDef> № платежа</th>
            <td mat-cell *matCellDef="let element"> {{element.payDocNum}} </td>
        </ng-container>

        <ng-container matColumnDef="sum">
            <th mat-header-cell *matHeaderCellDef> Сумма</th>
            <td mat-cell *matCellDef="let element"> {{element.sum | currency : ' '}} </td>
        </ng-container>

        <ng-container matColumnDef="agent">
            <th mat-header-cell *matHeaderCellDef> Агент</th>
            <td mat-cell *matCellDef="let element"> {{element.agent}} </td>
        </ng-container>

        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef> Статус</th>
            <td mat-cell *matCellDef="let element"> {{ element.status | paymentStatusRuPipe: element.status }} </td>
        </ng-container>

        <ng-container matColumnDef="menu">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element">

                <button mat-icon-button [matMenuTriggerFor]="menu" matTooltip="Действия над платежом">
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu="matMenu">
                    <div *ngIf="isMobipay == 'true'">
                        <button mat-menu-item (click)="distributeMobipay(element)" *ngIf="isMobipay == 'true' && canMobipayDistribute(element)">
                            <span>Разнести</span>
                        </button>
                        <button mat-menu-item (click)="distributeMobipay(element)" *ngIf="isMobipay == 'true' && canMobipayCancel(element)">
                            <span>Отменить</span>
                        </button>
                    </div>
                    <div *ngIf="isMobipay == 'false'">
                        <button mat-menu-item (click)="menuOnRowOpenPayment(element)">
                            <span>Открыть</span>
                        </button>
                        <button mat-menu-item [disabled]="!canTransit(element)" (click)="menuOnRowToTransit(element)">
                            <span>На транзит</span>
                        </button>
                        <button mat-menu-item [disabled]="!canDelTransit(element)" (click)="menuOnRowDeleteTransit(element)">
                            <span>Удалить с транзита</span>
                        </button>
                    </div>
                </mat-menu>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[10, 20, 30]" showFirstLastButtons></mat-paginator>
</div>
